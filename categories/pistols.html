<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pistols Camo Tracker</title>
    <link rel="apple-touch-icon" sizes="57x57" href="../favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="../favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="../favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="../favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="../favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="../favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="../favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="../favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="../favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="../favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../favicon/favicon-16x16.png">
    <link rel="manifest" href="../favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="../favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <link href="../styles/styles.css" rel="stylesheet" type="text/css">
    <script src="../scripts/state-manager.js"></script>
    <script>
        // Initialize state manager when page loads
        window.addEventListener('DOMContentLoaded', () => {
            // Initialize state
            StateManager.init();
            
            // Get current category from page title
            const category = 'pistols';
            
            // Add click handlers to camo items
            document.querySelectorAll('.camo-item').forEach(item => {
                item.addEventListener('click', function() {
                    const checkbox = this.querySelector('input[type="checkbox"]');
                    const label = this.querySelector('label').textContent;
                    const weapon = this.closest('.weapon');
                    const weaponId = weapon.dataset.weapon;
                    
                    // Toggle checkbox
                    checkbox.checked = !checkbox.checked;
                    
                    // Update visual state
                    this.classList.toggle('completed', checkbox.checked);
                    
                    // Update global state
                    StateManager.updateWeaponState(category, weaponId, label, checkbox.checked);
                    
                    // Update weapon complete status
                    updateWeaponCompleteStatus(weapon);
                });
            });

            // Add click handlers to weapon headers for collapse
            document.querySelectorAll('.weapon-name').forEach(header => {
                header.addEventListener('click', function(e) {
                    if (e.target.classList.contains('complete-btn')) return;
                    
                    const weapon = this.closest('.weapon');
                    const weaponId = weapon.dataset.weapon;
                    const isCollapsed = weapon.classList.toggle('collapsed');
                    
                    // Update collapse state
                    StateManager.updateCollapseState(category, weaponId, isCollapsed);
                });
            });

            // Restore saved state
            restoreState();
        });

        // Function to restore saved state
        function restoreState() {
            const category = 'pistols';
            const weapons = document.querySelectorAll('.weapon');
            
            weapons.forEach(weapon => {
                const weaponId = weapon.dataset.weapon;
                const weaponState = StateManager.getWeaponState(category, weaponId);
                
                // Restore collapse state
                if (weaponState.isCollapsed) {
                    weapon.classList.add('collapsed');
                }
                
                // Restore checkbox states
                weapon.querySelectorAll('.camo-item').forEach(item => {
                    const checkbox = item.querySelector('input[type="checkbox"]');
                    const label = item.querySelector('label').textContent;
                    
                    if (weaponState.completedCamos.includes(label)) {
                        checkbox.checked = true;
                        item.classList.add('completed');
                    }
                });
                
                // Update weapon complete status
                updateWeaponCompleteStatus(weapon);
            });
        }

        // Function to update weapon complete status
        function updateWeaponCompleteStatus(weapon) {
            const checkboxes = weapon.querySelectorAll('.camo-item input[type="checkbox"]');
            const allChecked = Array.from(checkboxes).every(cb => cb.checked);
            const weaponName = weapon.querySelector('.weapon-name');
            
            if (allChecked) {
                weaponName.classList.add('weapon-complete');
            } else {
                weaponName.classList.remove('weapon-complete');
            }
        }
    </script>
</head>
<body>
    <div class="container">
        <h1>Pistols Camo Tracker</h1>
<div class="weapon" data-weapon="9mmpm">
    <div class="weapon-name">9MM PM</div>
    <div class="weapon-content">
        <div class="camo-section">
            <div class="camo-section-title">Military Camos (Critical Kills)</div>
            <div class="camo-grid">
                <div class="camo-item"><input type="checkbox"><label>Slate (100)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Desert (200)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Evergreen (300)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Rugged (400)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Grim (600)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Stripe (800)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Oceanic (1000)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Whiteout (1500)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Purple Tiger (2000)</label></div>
            </div>
        </div>
        <div class="camo-section">
            <div class="camo-section-title">Special Camos</div>
            <div class="camo-item"><input type="checkbox"><label>Yottabyte</label></div>
            <div class="special-desc">300 Kills w/ Cryo Freeze</div>
            <div class="camo-item"><input type="checkbox"><label>Red Ring</label></div>
            <div class="special-desc">300 Kills w/ Dead Wire</div>
        </div>
        <div class="camo-section">
            <div class="camo-section-title">Mastery Camos</div>
            <div class="camo-grid">
                <div class="camo-item"><input type="checkbox"><label>Mystic Gold</label></div>
                <div class="camo-item"><input type="checkbox"><label>Opal</label></div>
                <div class="camo-item"><input type="checkbox"><label>Afterlife</label></div>
                <div class="camo-item"><input type="checkbox"><label>Nebula</label></div>
            </div>
        </div>
    </div>
</div>

<div class="weapon" data-weapon="grekhova">
    <div class="weapon-name">Grekhova</div>
    <div class="weapon-content">
        <div class="camo-section">
            <div class="camo-section-title">Military Camos (Critical Kills)</div>
            <div class="camo-grid">
                <div class="camo-item"><input type="checkbox"><label>Slate (100)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Desert (200)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Evergreen (300)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Rugged (400)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Grim (600)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Stripe (800)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Oceanic (1000)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Whiteout (1500)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Purple Tiger (2000)</label></div>
            </div>
        </div>
        <div class="camo-section">
            <div class="camo-section-title">Special Camos</div>
            <div class="camo-item"><input type="checkbox"><label>Hi-Fi</label></div>
            <div class="special-desc">10 Mangler Kills</div>
            <div class="camo-item"><input type="checkbox"><label>Ceres</label></div>
            <div class="special-desc">5 Critical Kills Rapidly 15 Times</div>
        </div>
        <div class="camo-section">
            <div class="camo-section-title">Mastery Camos</div>
            <div class="camo-grid">
                <div class="camo-item"><input type="checkbox"><label>Mystic Gold</label></div>
                <div class="camo-item"><input type="checkbox"><label>Opal</label></div>
                <div class="camo-item"><input type="checkbox"><label>Afterlife</label></div>
                <div class="camo-item"><input type="checkbox"><label>Nebula</label></div>
            </div>
        </div>
    </div>
</div>

<div class="weapon" data-weapon="gs45">
    <div class="weapon-name">GS45</div>
    <div class="weapon-content">
        <div class="camo-section">
            <div class="camo-section-title">Military Camos (Critical Kills)</div>
            <div class="camo-grid">
                <div class="camo-item"><input type="checkbox"><label>Slate (100)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Desert (200)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Evergreen (300)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Rugged (400)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Grim (600)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Stripe (800)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Oceanic (1000)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Whiteout (1500)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Purple Tiger (2000)</label></div>
            </div>
        </div>
        <div class="camo-section">
            <div class="camo-section-title">Special Camos</div>
            <div class="camo-item"><input type="checkbox"><label>Velvetvine</label></div>
            <div class="special-desc">300 Kills at Rare Rarity or Higher</div>
            <div class="camo-item"><input type="checkbox"><label>Siamese</label></div>
            <div class="special-desc">300 Hipfire Kills</div>
        </div>
        <div class="camo-section">
            <div class="camo-section-title">Mastery Camos</div>
            <div class="camo-grid">
                <div class="camo-item"><input type="checkbox"><label>Mystic Gold</label></div>
                <div class="camo-item"><input type="checkbox"><label>Opal</label></div>
                <div class="camo-item"><input type="checkbox"><label>Afterlife</label></div>
                <div class="camo-item"><input type="checkbox"><label>Nebula</label></div>
            </div>
        </div>
    </div>
</div>

<div class="weapon" data-weapon="stryder22">
    <div class="weapon-name">Stryder .22</div>
    <div class="weapon-content">
        <div class="camo-section">
            <div class="camo-section-title">Military Camos (Critical Kills)</div>
            <div class="camo-grid">
                <div class="camo-item"><input type="checkbox"><label>Slate (100)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Desert (200)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Evergreen (300)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Rugged (400)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Grim (600)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Stripe (800)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Oceanic (1000)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Whiteout (1500)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Purple Tiger (2000)</label></div>
            </div>
        </div>
        <div class="camo-section">
            <div class="camo-section-title">Special Camos</div>
            <div class="camo-item"><input type="checkbox"><label>Wavy</label></div>
            <div class="special-desc">300 Point Blank Kills</div>
            <div class="camo-item"><input type="checkbox"><label>Condemn</label></div>
            <div class="special-desc">30 Vermin Kills</div>
        </div>
        <div class="camo-section">
            <div class="camo-section-title">Mastery Camos</div>
            <div class="camo-grid">
                <div class="camo-item"><input type="checkbox"><label>Mystic Gold</label></div>
                <div class="camo-item"><input type="checkbox"><label>Opal</label></div>
                <div class="camo-item"><input type="checkbox"><label>Afterlife</label></div>
                <div class="camo-item"><input type="checkbox"><label>Nebula</label></div>
            </div>
        </div>
    </div>
</div>

<div class="weapon" data-weapon="gravemark357">
    <div class="weapon-name">Gravemark .357</div>
    <div class="weapon-content">
        <div class="camo-section">
            <div class="camo-section-title">Military Camos (Critical Kills)</div>
            <div class="camo-grid">
                <div class="camo-item"><input type="checkbox"><label>Slate (100)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Desert (200)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Evergreen (300)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Rugged (400)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Grim (600)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Stripe (800)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Oceanic (1000)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Whiteout (1500)</label></div>
                <div class="camo-item"><input type="checkbox"><label>Purple Tiger (2000)</label></div>
            </div>
        </div>
        <div class="camo-section">
            <div class="camo-section-title">Special Camos</div>
            <div class="camo-item"><input type="checkbox"><label>Grasslands</label></div>
            <div class="special-desc">300 Point Blank Kills</div>
            <div class="camo-item"><input type="checkbox"><label>Vapor Wave</label></div>
            <div class="special-desc">10 Mangler Kills</div>
        </div>
        <div class="camo-section">
            <div class="camo-section-title">Mastery Camos</div>
            <div class="camo-grid">
                <div class="camo-item"><input type="checkbox"><label>Mystic Gold</label></div>
                <div class="camo-item"><input type="checkbox"><label>Opal</label></div>
                <div class="camo-item"><input type="checkbox"><label>Afterlife</label></div>
                <div class="camo-item"><input type="checkbox"><label>Nebula</label></div>
            </div>
        </div>
    </div>
</div>
        <a href="../index.html" class="back-link">← Back to Main Tracker</a>
    </div>
</body>
</html>   